(this.webpackJsonpa1=this.webpackJsonpa1||[]).push([[0],{51:function(t,e,o){},52:function(t,e,o){},79:function(t,e,o){"use strict";o.r(e);var n=o(0),a=o(21),r=o.n(a),c=(o(51),o(52),o(94)),s=o(4),i="MAP_POST_DATA",l={mapPostData:function(t){return{type:i,payload:t}}},u=o(2),d=o(27),j=Object(c.a)({search:{width:"80%"}}),p=function(){var t=j(),e=Object(s.b)(),o=function(t){return d.get("https://www.reddit.com/"+t.value+"r/hot.json?limit=10").then((function(t){var o=t.data;e(l.getTop10HotPosts(o))}))};return Object(u.jsx)("input",{type:"text",placeholder:"Search a subreddit",className:t.search,onKeyPress:function(t){return o}})},b=o(20),h=o(91),v=o(93),f="ADD_FAVORITE",O="GET_FAVORITES",g="CLEAR_FAVORITES",x="TOGGLE_FAVORITES",m="REMOVE_FAVORITE",w="MAP_FAVORITE_POST_DATA",L={addFavorite:function(t){return{type:f,payload:t}},removeFavorite:function(t){return{type:m,payload:t}},getFavoriteIds:function(t){return{type:O,payload:t}},clearFavorites:function(t){return{type:g,payload:t}},toggleFavorites:function(t){return{type:x,payload:t}},mapPostData:function(t){return{type:w,payload:t}}},y=Object(c.a)({resultBox:{backgroundColor:"#e3e3e3",borderRadius:"5px",margin:"10px"},postContent:{position:"relative",height:"50%"},starSvg:{fill:"white",stroke:"black",strokeWidth:5}}),C=function(t){var e=Object(n.useState)(!1),o=Object(b.a)(e,2),a=o[0],r=o[1],c=Object(n.useState)(""),i=Object(b.a)(c,2),l=i[0],d=i[1],j=y(),p=Object(s.b)();return Object(n.useEffect)((function(){var e;d(t.postId),r(null!==(e=t.favorited)&&void 0!==e&&e)}),[t]),Object(u.jsxs)(h.a,{container:!0,alignItems:"center",children:[Object(u.jsx)(h.a,{item:!0,xs:11,children:Object(u.jsx)(v.a,{className:j.resultBox,children:Object(u.jsxs)(h.a,{container:!0,className:j.postContent,children:[Object(u.jsx)(h.a,{item:!0,xs:2,children:Object(u.jsxs)("span",{children:["Posted by ",t.author]})}),Object(u.jsx)(h.a,{item:!0,xs:10,children:Object(u.jsx)("span",{children:t.title})}),Object(u.jsxs)(h.a,{container:!0,children:[Object(u.jsx)(h.a,{item:!0,xs:2,children:Object(u.jsxs)("span",{children:[t.upvotes," upvotes"]})}),Object(u.jsx)(h.a,{item:!0,children:Object(u.jsxs)("span",{children:["created at ",t.created_utc]})})]})]})})}),Object(u.jsx)(h.a,{item:!0,xs:1,children:Object(u.jsx)("svg",{width:"48",height:"46",viewBox:"0 0 48 46",fill:"none",xmlns:"http://www.w3.org/2000/svg",onClick:function(){p(a?L.removeFavorite(l):L.addFavorite(l)),r(!a)},className:j.starSvg,children:Object(u.jsx)("path",{d:"M24 3.23607L28.6618 17.5836L28.8863 18.2746H29.6129H44.6987L32.494 27.1418L31.9062 27.5689L32.1307 28.2599L36.7925 42.6074L24.5878 33.7401L24 33.3131L23.4122 33.7401L11.2075 42.6074L15.8693 28.2599L16.0938 27.5689L15.506 27.1418L3.30127 18.2746H18.3871H19.1137L19.3382 17.5836L24 3.23607Z",stroke:"black",strokeWidth:"2",fill:a?"gold":"white"})})})]})},k=o(95),F=Object(c.a)({resultBox:{width:"80%",height:"500px",backgroundColor:"white",borderRadius:"5px",overflowY:"scroll",margin:"0 auto",marginBlock:"20px"},noResults:{color:"black"}}),I=function(t){var e,o=F(),n=Object(s.c)((function(t){return t.favorites.ids}));return Object(u.jsx)(k.a,{className:o.resultBox,children:(null===(e=t.data)||void 0===e?void 0:e.length)>0?t.data.map((function(e){var o;return Object(u.jsx)(C,{postId:e.id,title:e.title,author:e.author,upvotes:e.upvotes,favorited:null!==(o=t.defaultFavorited)&&void 0!==o?o:n.includes(e.id)},e.id)})):Object(u.jsx)("span",{className:o.noResults,children:"No results found."})})},S=o(96),A=o(27).default,P=Object(c.a)({rootOpen:{backgroundColor:"#3C3C3C",width:"75%",position:"fixed",zIndex:1e3},rootClosed:{display:"none",zIndex:-999},title:{color:"white"},closeButton:{position:"absolute",top:10,right:15,color:"white",width:"24px",height:"24px",borderRadius:"10px","&:hover":{backgroundColor:"gray"},"&:active":{backgroundColor:"#282c34"}},closeIcon:{marginBottom:"20px"}}),_=function(){var t=P(),e=Object(s.b)(),o=Object(s.c)((function(t){return t.favorites.opened})),a=Object(s.c)((function(t){return t.favorites.ids})),r=Object(s.c)((function(t){return t.favorites.posts}));Object(n.useEffect)((function(){e(L.getFavoriteIds()),a.length>0&&o&&A.get("https://www.reddit.com/by_id/"+c()+".json",{headers:{"Access-Control-Allow-Origin":"http://localhost:3000"}}).then((function(t){var o=t.data;e(L.mapPostData(o))})).catch((function(t){console.log(t)}))}),[o]);var c=function(){console.log(a);var t="t3_"+a.join(",t3_");return console.log(t),t};return Object(u.jsxs)(v.a,{className:o?t.rootOpen:t.rootClosed,children:[Object(u.jsx)("div",{className:t.closeButton,onClick:function(){return e(L.toggleFavorites())},children:Object(u.jsx)(S.a,{className:t.closeIcon})}),Object(u.jsx)("h1",{className:t.title,children:"Your Favorite Posts"}),Object(u.jsx)(k.a,{className:t.resultBoxContainer,children:Object(u.jsx)(I,{data:r,defaultFavorited:!0})})]})},N=Object(c.a)({root:{position:"absolute",top:10,left:10,backgroundColor:"#3C3C3C",borderRadius:10,"&:hover":{backgroundColor:"gray"},WebkitUserSelect:"none",msUserSelect:"none",userSelect:"none",padding:"5px",display:"flex",alignItems:"center"},starSVG:{webkitAnimation:"breathing 2s ease-out infinite",animation:"breathing 2s ease-out infinite"}}),R=function(){var t=N(),e=Object(s.b)();return Object(u.jsxs)(k.a,{className:t.root,onClick:function(){return e(L.toggleFavorites())},children:[Object(u.jsx)("svg",{width:"48",height:"46",viewBox:"0 0 48 46",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:t.starSVG,children:Object(u.jsx)("path",{d:"M24 3.23607L28.6618 17.5836L28.8863 18.2746H29.6129H44.6987L32.494 27.1418L31.9062 27.5689L32.1307 28.2599L36.7925 42.6074L24.5878 33.7401L24 33.3131L23.4122 33.7401L11.2075 42.6074L15.8693 28.2599L16.0938 27.5689L15.506 27.1418L3.30127 18.2746H18.3871H19.1137L19.3382 17.5836L24 3.23607Z",stroke:"black",strokeWidth:"2",fill:"gold"})}),Object(u.jsx)("span",{children:"Favorite Posts"})]})},E=o(27).default,T=function(){var t=Object(s.c)((function(t){return t.posts.results})),e=Object(s.b)();return Object(n.useEffect)((function(){E.get("https://www.reddit.com/r/all/hot.json?limit=10").then((function(t){var o=t.data;e(l.mapPostData(o))}))}),[]),Object(u.jsxs)("header",{className:"App-header",children:[Object(u.jsx)(R,{}),Object(u.jsx)(_,{}),Object(u.jsx)(p,{}),Object(u.jsx)(I,{data:t})]})};var B=function(){return Object(u.jsx)("div",{className:"App",children:Object(u.jsx)(T,{})})},H=function(t){t&&t instanceof Function&&o.e(3).then(o.bind(null,99)).then((function(e){var o=e.getCLS,n=e.getFID,a=e.getFCP,r=e.getLCP,c=e.getTTFB;o(t),n(t),a(t),r(t),c(t)}))},D=o(18),V=o(5),M={ids:[],posts:[],opened:!1},G=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:M,e=arguments.length>1?arguments[1]:void 0,o=function(){var o;console.log("Adding favorite: ",e.payload);var n=null!==(o=i())&&void 0!==o?o:[];return console.log("favoritePosts: ",n),n.includes(e.payload)||n.push(e.payload),l(n),Object(V.a)(Object(V.a)({},t),{},{ids:t.ids.concat(e.payload)})},n=function(){var o=i();return o=o.filter((function(t){return t!==e.payload})),l(o),Object(V.a)(Object(V.a)({},t),{},{ids:o})},a=function(){var e=i();return Object(V.a)(Object(V.a)({},t),{},{ids:e})},r=function(){var o,n,a;return Object(V.a)(Object(V.a)({},t),{},{posts:null===(o=e.payload)||void 0===o||null===(n=o.data)||void 0===n||null===(a=n.children)||void 0===a?void 0:a.map((function(t){return{id:"t3_"+t.data.id,title:t.data.title,author:t.data.author,upvotes:t.data.ups,created_utc:t.data.created_utc}}))})},c=function(){return localStorage.removeItem("favoritePosts"),Object(V.a)(Object(V.a)({},t),{},{posts:[],ids:[]})},s=function(){return Object(V.a)(Object(V.a)({},t),{},{opened:!t.opened})},i=function(){var t;return null!==(t=JSON.parse(localStorage.getItem("favoritePosts")))&&void 0!==t?t:[]},l=function(t){localStorage.setItem("favoritePosts",JSON.stringify(t))};switch(e.type){case f:return o();case m:return n();case O:return a();case g:return c();case x:return s();case w:return r()}return t},J={results:[]},W=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:J,e=arguments.length>1?arguments[1]:void 0,o=function(){var o,n,a;return Object(V.a)(Object(V.a)({},t),{},{results:null===(o=e.payload)||void 0===o||null===(n=o.data)||void 0===n||null===(a=n.children)||void 0===a?void 0:a.map((function(t){return{id:t.data.id,title:t.data.title,author:t.data.author,upvotes:t.data.ups,created_utc:t.data.created_utc}}))})};switch(e.type){case i:return o();default:return t}},q=Object(D.b)({favorites:G,posts:W}),z=Object(D.c)(q),U=function(){var t="cors-anywhere.herokuapp.com",e="https://"+t+"/",o=[].slice,n=window.location.protocol+"//"+window.location.host;console.log(n);var a=XMLHttpRequest.prototype.open;XMLHttpRequest.prototype.open=function(){var r=o.call(arguments),c=/^https?:\/\/([^/]+)/i.exec(r[1]);return c&&c[0].toLowerCase()!==n&&c[1]!==t&&(r[1]=e+r[1]),a.apply(this,r)}};r.a.render(Object(u.jsx)(s.a,{store:z,children:Object(u.jsx)(B,{})}),document.getElementById("root")),H(),U()}},[[79,1,2]]]);
//# sourceMappingURL=main.4fd94666.chunk.js.map